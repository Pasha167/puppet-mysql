---
# MySQL my.cnf parameters
profiles::mysql_config:
# mysqld:

profiles::mysql_config::password: ENC[PKCS7,MIIBeQYJKoZIhvcNAQcDoIIBajCCAWYCAQAxggEhMIIBHQIBADAFMAACAQEwDQYJKoZIhvcNAQEBBQAEggEAZrVVk4d11aafgvxsgbUSJj9MEhBlsTPp2neXnBqkuSwzjvE+om7fYtMdQUuo07GRJCw2k0MfTsdARaQGs5X0FcRajCC5U1qyRPIzB6f/aazW8UcJIex86HXoxvfZbQRzIr/X8EO0Sh+PvWz9gmS5YAR0EZuOaQ1diXufKszBhnQUb4122tb+JuKMUgV8duz5GwLfFnNu0TTdQbzSdtca/TPbxOibFg80wGjW2Ty4qnVsKR4EApzRPi5wq49V4EEmt3hiixS+6tI8swnayi3krVut6Eh4GGLjVIl5+/dTBmVT5Ts0dZ0eJIKF0J3S1/KV7qhiVuDdjnZVT8YRHf/hQzA8BgkqhkiG9w0BBwEwHQYJYIZIAWUDBAEqBBANYid0803X4nvuXoCoTXwwgBBDtddmCAobGy298q5VYyDa]
profiles::mysql_config::password2: ENC[PKCS7,MIIBeQYJKoZIhvcNAQcDoIIBajCCAWYCAQAxggEhMIIBHQIBADAFMAACAQEwDQYJKoZIhvcNAQEBBQAEggEADYTWomVM8BTEQJ9otEbXX2Z9FGXIYu18hQlO3PyUcNVlvFp4CeMCCriemmsAzDTaROUKOASIXPblomg9CxDHSAlY7n85Bin4p5dve+1ddu9UEkS8fBSOzbdPIa8Tv5kCSO4qS8v9/ksfaiLb1ekoss8CImQFp5ZMgXF71DbIkVMDcrLwR6GLFS/GNq2UL/+SKqySoZozFYj69YCauPfkKxpVHI4Mtv3xuTOAadl6MKhvsl3MvjeNfYIhPaH1Bzw3xG86XgbHk5ARiMy4ZugLnMfrHTmbAuSlyEJN5s3WXQvqYaQ+PB8xEApE8lSFWXhzp0ICfd0C+S/Xf9krKU4R0DA8BgkqhkiG9w0BBwEwHQYJYIZIAWUDBAEqBBCC4aQngRB8FVxz4+EdSlsOgBCogM+cEhLjenbD5kj1jEVO]


  # GENERAL #
profiles::mysql_config::user                           : mysql
profiles::mysql_config::default-storage-engine         : InnoDB
profiles::mysql_config::character-set-server           : utf8
profiles::mysql_config::collation_server               : utf8_bin
profiles::mysql_config::tmpdir                         : /opt/mysql/tmp/
profiles::mysql_config::socket                         : /var/run/mysqld/mysqld.sock
profiles::mysql_config::bind-address                   : '*'

# MyISAM #
profiles::mysql_config::key-buffer-size                : 32M
profiles::mysql_config::myisam-recover                 : FORCE,BACKUP

# SAFETY #
profiles::mysql_config::max-allowed-packet             : 256M
profiles::mysql_config::max-connect-errors             : 1000000
profiles::mysql_config::sysdate-is-now                 : 1
profiles::mysql_config::innodb-strict-mode             : 1

# DATA STORAGE #
profiles::mysql_config::datadir                        : /opt/mysql/data/

# BINARY LOGGING #
profiles::mysql_config::max-binlog-size                : 1G
profiles::mysql_config::log-bin                        : /opt/mysql/log/%{hostname}-bin
profiles::mysql_config::log-bin-index                  : /opt/mysql/log/%{hostname}-bin-index
profiles::mysql_config::expire-logs-days               : 7
profiles::mysql_config::sync-binlog                    : 1
profiles::mysql_config::log_bin_trust_function_creators: 1
profiles::mysql_config::binlog-format                  : ROW
profiles::mysql_config::server-id                      : 999999 #change to last two ip actets
profiles::mysql_config::log-slave-updates              : 1
#profiles::mysql_config::slave_compressed_protocol     : ON
#profiles::mysql_config::gtid_domain_id                : 1
#profiles::mysql_config::replicate-same-server-id      : 0

# SLAVE #
profiles::mysql_config::slave-parallel-threads         : 5
profiles::mysql_config::slave_max_allowed_packet       : 1073741824
#profiles::mysql_config::read_only                     : ON
profiles::mysql_config::relay-log                      : /opt/mysql/log/mysqld-relay-bin
profiles::mysql_config::relay-log-index                : /opt/mysql/log/mysqld-relay-bin.index

# CACHES AND LIMITS #
profiles::mysql_config::tmp-table-size                 : 32M
profiles::mysql_config::max-heap-table-size            : 32M
profiles::mysql_config::query-cache-type               : 0
profiles::mysql_config::query-cache-size               : 0
profiles::mysql_config::max-connections                : 250
profiles::mysql_config::thread-cache-size              : 50
profiles::mysql_config::open-files-limit               : 65535
profiles::mysql_config::table-definition-cache         : 1024
profiles::mysql_config::table-open-cache               : 2048

# INNODB #
profiles::mysql_config::innodb-flush-method            : O_DIRECT
profiles::mysql_config::innodb-log-files-in-group      : 2
profiles::mysql_config::innodb-log-file-size           : 1G
profiles::mysql_config::innodb_log_buffer_size         : 8M
profiles::mysql_config::innodb-flush-log-at-trx-commit : 2
profiles::mysql_config::innodb-file-per-table          : 1
profiles::mysql_config::innodb-buffer-pool-size        : 0 # default 0.8 of memory
profiles::mysql_config::innodb_buffer_pool_instances   : 10
profiles::mysql_config::innodb_file_format             : Barracuda
profiles::mysql_config::innodb_file_format_max         : Barracuda
profiles::mysql_config::innodb_flush_neighbors         : 0
profiles::mysql_config::innodb-buffer-pool-dump-at-shutdown : 0
profiles::mysql_config::innodb-buffer-pool-load-at-startup : 0

# LOGGING #
profiles::mysql_config::log_output                     : FILE
profiles::mysql_config::log_warnings                   : 2
profiles::mysql_config::log-error                      : /opt/mysql/log/%{hostname}.err
profiles::mysql_config::log-queries-not-using-indexes  : 0
profiles::mysql_config::log_slow_admin_statements      : 0
profiles::mysql_config::slow-query-log                 : 1
profiles::mysql_config::slow-query-log-file            : /opt/mysql/log/mysql-slow.log
profiles::mysql_config::long_query_time                : 10
profiles::mysql_config::general_log                    : 0
profiles::mysql_config::general_log_file               : /opt/mysql/log/mysql-general.log

# PERFORMANCE_SCHEMA # Only for MySQL 5.6 and MariaDB 10.0.10 and up.
profiles::mysql_config::performance_schema : ON
profiles::mysql_config::performance_schema_consumer_statements_digest : ON
profiles::mysql_config::performance_schema_consumer_events_statements_history_long : ON


